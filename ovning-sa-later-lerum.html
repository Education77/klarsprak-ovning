<!doctype html>
<html lang="sv">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>√ñvning: S√• l√•ter Lerums kommun</title>
<style>
  :root{
    --bg:#f9faf8; --card:#fff; --line:#e2e6e2; --ink:#1f2a1f;
    --muted:#556; --accent:#7ba87f; --tipbg:#eef3ee; --bad:#cc7b7b;
  }
  body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;background:var(--bg);color:var(--ink);margin:0;padding:20px;}
  h1{font-size:1.6rem;margin:0 0 0.4em}
  h2{font-size:1.25rem;margin:0 0 0.4em}
  p.lead{color:var(--muted);margin:0 0 1.2em}
  .section{margin-top:20px}
  .card{background:var(--card);border:1px solid var(--line);border-radius:14px;padding:16px;margin-bottom:14px;box-shadow:0 2px 10px rgba(0,0,0,.04)}
  .muted{color:var(--muted)}
  .bar{display:flex;gap:10px;flex-wrap:wrap;margin-top:12px}
  button{border:1px solid var(--line);background:#fff;border-radius:999px;padding:10px 14px;font:inherit;cursor:pointer}
  button:hover{box-shadow:0 1px 6px rgba(0,0,0,.08)}
  .tip{background:var(--tipbg);border-left:4px solid var(--accent);padding:12px 14px;border-radius:8px;margin-top:12px}
  .score{font-weight:600}

  /* Del 1 ‚Äì Drag & drop */
  .grid{display:grid;grid-template-columns:1fr 1fr 1fr;gap:14px}
  @media (max-width:900px){.grid{grid-template-columns:1fr}}
  .bank .items{display:flex;flex-wrap:wrap;gap:10px}
  .chip{background:#fff;border:1px solid var(--line);border-radius:999px;padding:10px 12px;cursor:grab;user-select:none;font-size:14px;line-height:1.2;box-shadow:0 1px 6px rgba(0,0,0,.05)}
  .drop{min-height:160px;border:2px dashed var(--line);border-radius:12px;padding:10px;display:flex;flex-wrap:wrap;gap:10px;background:#fff}
  .drop.hover{background:#fafdf9;border-color:var(--accent)}
  .label{display:flex;align-items:center;gap:8px;margin-bottom:8px}
  .label:before{content:"";display:inline-block;width:8px;height:20px;background:var(--accent);border-radius:4px}
  .chip.correct{border-color:#7fbf7f}
  .chip.wrong{border-color:var(--bad)}

  /* Del 2 ‚Äì Quiz */
  .question h3{margin:0 0 6px;font-size:1rem}
  .options{display:flex;flex-direction:column;gap:8px;margin-top:8px}
  .option{text-align:left;background:#fff;border:1px solid var(--line);border-radius:10px;padding:10px 14px;cursor:pointer;transition:background .15s,border-color .15s}
  .option:hover{background:#f3f7f3}
  .option.selected{border-color:var(--accent);background:#f0f7f0}
  .option.correct{border-color:#7fbf7f;background:#f0f7f0}
  .option.wrong{border-color:var(--bad);background:#fbf3f3}

  /* Feedback ‚Äì vit bakgrund, f√§rgad v√§nsterkant och ikon (SVG) */
  .feedback{margin-top:8px;font-size:.95rem;display:flex;align-items:flex-start;gap:6px;padding-left:8px;line-height:1.4;border-left:4px solid transparent;border-radius:4px;background:#fff;display:none}
  .feedback.correct{border-left-color:#7fbf7f;color:#1f331f;font-weight:500}
  .feedback.wrong{border-left-color:var(--bad);color:#4b1f1f;font-weight:500}
  .feedback.missing{border-left-color:#9ca3af;color:#3f3f46}
  .feedback .icon{width:18px;height:18px;flex-shrink:0;margin-top:2px;display:inline-block}

  /* Del 3 ‚Äì Reflektion */
  textarea{width:100%;min-height:110px;border:1px solid var(--line);border-radius:10px;padding:12px;font:inherit;resize:vertical;background:#fff}

  /* Slutbel√∂ning */
  #final{display:none;margin-top:20px;background:#f0f7f0;border-left:4px solid #7ba87f;padding:14px;border-radius:10px;font-size:1rem}
</style>
</head>
<body>

<h1>√ñvning: S√• l√•ter Lerums kommun</h1>
<p class="lead">Tr√§na p√• att v√§lja r√§tt ton, k√§nna igen ton i olika situationer ‚Äì och reflektera √∂ver hur spr√•ket p√•verkar upplevelsen.</p>

<!-- ===== Del 1: Matcha m√•lgrupp (Drag & Drop) ===== -->
<section class="section">
  <h2>Del 1 ‚Äì Matcha texten med r√§tt m√•lgrupp</h2>
  <p class="muted">Dra varje text till den m√•lgrupp d√§r tonen passar b√§st.</p>

  <div class="card bank">
    <div class="label"><strong>Texter att placera</strong></div>
    <div id="bank" class="items" role="list"></div>
  </div>

  <div class="grid">
    <div class="card">
      <div class="label"><strong>Gymnasieelever</strong></div>
      <div id="drop-elever" class="drop" aria-label="Gymnasieelever"></div>
      <p class="muted" style="margin-top:8px">Ung, uppmuntrande, direkt ‚Äì korta meningar och ‚Äúaction‚Äù.</p>
    </div>
    <div class="card">
      <div class="label"><strong>Nyinflyttade</strong></div>
      <div id="drop-nyinflyttade" class="drop" aria-label="Nyinflyttade"></div>
      <p class="muted" style="margin-top:8px">V√§nlig, informativ, inkluderande ‚Äì bygger f√∂rtroende.</p>
    </div>
    <div class="card">
      <div class="label"><strong>F√∂retagare</strong></div>
      <div id="drop-foretagare" class="drop" aria-label="F√∂retagare"></div>
      <p class="muted" style="margin-top:8px">Saklig men tillm√∂tesg√•ende ‚Äì fokus p√• effektivitet och tydlighet.</p>
    </div>
  </div>

  <div class="bar">
    <button id="checkDnd">Kontrollera del 1</button>
    <button id="resetDnd">Rensa del 1</button>
  </div>
  <div id="resDnd" class="tip" style="display:none"></div>
</section>

<!-- ===== Del 2: K√§nn igen tonen (MCQ) ===== -->
<section class="section">
  <h2>Del 2 ‚Äì K√§nn igen tonen i olika situationer</h2>
  <p class="muted">V√§lj den ton som st√§mmer b√§st med texten. Kontrollera n√§r du √§r klar.</p>

  <div id="quiz"></div>

  <div class="bar">
    <button id="checkQuiz">Kontrollera del 2</button>
    <button id="resetQuiz">Rensa del 2</button>
  </div>
  <div id="resQuiz" class="tip" style="display:none"></div>
</section>

<!-- ===== Del 3: Reflektion ===== -->
<section class="section">
  <h2>Del 3 ‚Äì Reflektera</h2>
  <div class="card">
    <p><strong>1)</strong> N√§r tycker du att ton g√∂r st√∂rst skillnad i ditt arbete?</p>
    <textarea placeholder="Skriv dina tankar h√§r ‚Ä¶ (sparas inte)"></textarea>
  </div>
  <div class="card">
    <p><strong>2)</strong> Vilken ton vill du att Lerums kommun ska f√∂rmedla i m√∂tet med inv√•nare ‚Äì och hur kan du bidra till det i dina texter?</p>
    <textarea placeholder="Skriv dina tankar h√§r ‚Ä¶ (sparas inte)"></textarea>
  </div>
</section>

<!-- Slutbel√∂ning -->
<div id="final">
  üíö <strong>Du nailade tonen ‚Äì snyggt!</strong><br>
  Dina svar visar att du kan anpassa spr√•ket efter b√•de mottagare och situation.
</div>

<script>
/* ---------- Ikoner (inline-SVG) ---------- */
const ICONS = {
  check:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="18" height="18" aria-hidden="true"><polyline points="20 6 9 17 4 12" fill="none" stroke="#7ba87f" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"/></svg>',
  cross:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="18" height="18" aria-hidden="true"><line x1="18" y1="6" x2="6" y2="18" stroke="#cc7b7b" stroke-width="3" stroke-linecap="round"/><line x1="6" y1="6" x2="18" y2="18" stroke="#cc7b7b" stroke-width="3" stroke-linecap="round"/></svg>'
};

/* ======================================================
   Del 1: Drag & Drop med SLUMP
   ====================================================== */
const ALL_DND_ITEMS = [
  // Elever
  { text:"Anm√§l dig till skolans sommaraktiviteter via v√•r e-tj√§nst!", target:"elever" },
  { text:"Vill du sommarjobba i kommunen? Skicka in din ans√∂kan senast 1 april!", target:"elever" },
  { text:"Beh√∂ver du intyg f√∂r praktik eller sommarjobb? Kontakta din studie- och yrkesv√§gledare.", target:"elever" },
  { text:"Kom och p√•verka! Dela dina id√©er i v√•r enk√§t.", target:"elever" },

  // Nyinflyttade
  { text:"V√§lkommen till Lerum! H√§r hittar du information om soph√§mtning, skolor och fritid.", target:"nyinflyttade" },
  { text:"Uppt√§ck vad Lerum har att erbjuda ‚Äì fr√•n natur till kultur.", target:"nyinflyttade" },
  { text:"S√• sorterar du avfallet r√§tt i din nya bostad ‚Äì h√§r finns tips och schema.", target:"nyinflyttade" },
  { text:"H√§r f√•r du en enkel √∂verblick √∂ver v√•r service n√§r du √§r ny i kommunen.", target:"nyinflyttade" },

  // F√∂retagare
  { text:"Du kan l√§mna din bygglovsans√∂kan digitalt ‚Äì vi hanterar den snabbt och tydligt.", target:"foretagare" },
  { text:"Har ditt f√∂retag id√©er som kan utveckla kommunen? H√∂r g√§rna av dig!", target:"foretagare" },
  { text:"Tack f√∂r att du bidrar till en h√•llbar kommun! Du som f√∂retagare g√∂r skillnad.", target:"foretagare" },
  { text:"Beh√∂ver du st√∂d i processen? H√∂r av dig ‚Äì vi hj√§lper dig vidare.", target:"foretagare" }
];

function randomItems(arr, n=6){ return [...arr].sort(()=>0.5-Math.random()).slice(0,n); }

const bank = document.getElementById('bank');
const zones = {
  elever: document.getElementById('drop-elever'),
  nyinflyttade: document.getElementById('drop-nyinflyttade'),
  foretagare: document.getElementById('drop-foretagare')
};

let dragEl = null;
let dndScore = 0;
let DND_ITEMS = [];

function makeChip(item, idx){
  const d = document.createElement('div');
  d.className = 'chip';
  d.draggable = true;
  d.textContent = item.text;
  d.dataset.target = item.target;
  d.dataset.idx = idx;
  d.addEventListener('dragstart', e=>{
    dragEl = d;
    e.dataTransfer.effectAllowed = 'move';
  });
  d.addEventListener('dragend', ()=> dragEl = null);
  return d;
}

function resetDnd(){
  document.getElementById('resDnd').style.display = 'none';
  bank.innerHTML = '';
  Object.values(zones).forEach(z=>z.innerHTML='');
  DND_ITEMS = randomItems(ALL_DND_ITEMS, 6); // √§ndra antalet vid behov
  DND_ITEMS.forEach((it,i)=> bank.appendChild(makeChip(it,i)));
  dndScore = 0;
  checkFinal(); // d√∂ljer ev. final om quiz var klart
}

['elever','nyinflyttade','foretagare'].forEach(id=>{
  const z = zones[id];
  ['dragover','dragenter'].forEach(ev=>{
    z.addEventListener(ev, e=>{ e.preventDefault(); z.classList.add('hover'); });
  });
  z.addEventListener('dragleave', ()=> z.classList.remove('hover'));
  z.addEventListener('drop', e=>{
    e.preventDefault(); z.classList.remove('hover');
    if(dragEl) z.appendChild(dragEl);
  });
});

function checkDnd(){
  const res = document.getElementById('resDnd');
  document.querySelectorAll('.chip').forEach(c=>c.classList.remove('correct','wrong'));
  let total = DND_ITEMS.length, correct = 0;

  Object.entries(zones).forEach(([zoneId, zone])=>{
    zone.querySelectorAll('.chip').forEach(chip=>{
      if(chip.dataset.target === zoneId){
        chip.classList.add('correct');
        correct++;
      } else {
        chip.classList.add('wrong');
      }
    });
  });

  res.style.display = 'block';
  res.innerHTML = (correct===total)
    ? `<span class="score">Snyggt! ${correct}/${total} r√§tt.</span> Alla texter ligger hos r√§tt m√•lgrupp.`
    : `<span class="score">${correct}/${total} r√§tt.</span> Kika p√• de r√∂da markeringarna och justera.`;

  dndScore = (correct===total) ? 1 : 0;
  checkFinal();
}

/* ======================================================
   Del 2: Quiz med SLUMP
   ====================================================== */
const ALL_QUIZ = [
  {
    text:"St√§ng av vattnet f√∂re renoveringen ‚Äì s√• undviker du skador.",
    options:[
      {text:"Direkt och viktig", correct:true, feedback:"Tydligt och handlingsinriktat ‚Äì s√§kerhet i fokus."},
      {text:"V√§nlig och informativ", correct:false, feedback:"H√§r beh√∂vs mer tyngd och tydlighet."},
      {text:"Ung och uppmuntrande", correct:false, feedback:"Inte r√§tt ton f√∂r s√§kerhetsinformation."}
    ]
  },
  {
    text:"Kom och tr√§ffa oss p√• Lerumsdagen ‚Äì dela dina id√©er om framtidens Lerum!",
    options:[
      {text:"Inspirerande och engagerande", correct:true, feedback:"Bjuder in till dialog och delaktighet."},
      {text:"Saklig och formell", correct:false, feedback:"Lite f√∂r stel f√∂r evenemang."},
      {text:"Direkt och viktig", correct:false, feedback:"Inte en akut fr√•ga."}
    ]
  },
  {
    text:"T√§nk p√• att h√•lla g√•ngbanan fri fr√•n sn√∂ och is ‚Äì s√• blir det s√§krare f√∂r alla.",
    options:[
      {text:"Direkt och viktig", correct:true, feedback:"Tydligt och omt√§nksamt ‚Äì s√§kerhet i fokus."},
      {text:"V√§nlig och informativ", correct:false, feedback:"H√§r kr√§vs tydligare uppmaning."},
      {text:"Formell och neutral", correct:false, feedback:"Lite f√∂r distanserad."}
    ]
  },
  {
    text:"Nu kan du enkelt l√§mna synpunkter via v√•r nya e-tj√§nst!",
    options:[
      {text:"V√§nlig och uppmuntrande", correct:true, feedback:"Positiv ton som s√§nker tr√∂skeln."},
      {text:"Formell och saklig", correct:false, feedback:"Torrt f√∂r att v√§cka intresse."},
      {text:"Direkt och viktig", correct:false, feedback:"Inte en varning ‚Äì mer service."}
    ]
  },
  {
    text:"Vi kommer att st√§nga av vattnet i omr√•det p√• torsdag kl. 8‚Äì12 f√∂r underh√•ll.",
    options:[
      {text:"Direkt och viktig", correct:true, feedback:"Rakt och tydligt ‚Äì viktig driftinformation."},
      {text:"V√§nlig och informativ", correct:false, feedback:"Lite f√∂r mjukt h√§r."},
      {text:"Uppmuntrande och engagerande", correct:false, feedback:"Inte r√§tt ton."}
    ]
  },
  {
    text:"Tack f√∂r att du sorterar r√§tt ‚Äì tillsammans minskar vi avfallet!",
    options:[
      {text:"Uppmuntrande och positiv", correct:true, feedback:"Varm ton som st√§rker delaktighet."},
      {text:"Saklig och kortfattad", correct:false, feedback:"Informativt men utan k√§nsla."},
      {text:"Formell och neutral", correct:false, feedback:"F√∂r kallt."}
    ]
  },
  {
    text:"V√§lkommen till Lerum! H√§r hittar du information om soph√§mtning, skolor och fritid.",
    options:[
      {text:"V√§nlig och informativ", correct:true, feedback:"Inkluderande och v√§lkomnande."},
      {text:"Formell och saklig", correct:false, feedback:"Lite f√∂r distanserat."},
      {text:"Direkt och viktig", correct:false, feedback:"Inte en s√§kerhetsfr√•ga."}
    ]
  }
];

function randomQuiz(arr, n=5){ return [...arr].sort(()=>0.5-Math.random()).slice(0,n); }

const quizEl = document.getElementById('quiz');
let QUIZ = [];
let quizScore = 0;

function renderQuiz(){
  QUIZ = randomQuiz(ALL_QUIZ, 5); // √§ndra antalet vid behov
  quizEl.innerHTML = '';
  QUIZ.forEach((q,i)=>{
    const card = document.createElement('div');
    card.className = 'card question';
    const h3 = document.createElement('h3');
    h3.textContent = `${i+1}) ${q.text}`;
    card.appendChild(h3);

    const opts = document.createElement('div');
    opts.className = 'options';
    q.options.forEach((o,j)=>{
      const b = document.createElement('button');
      b.className = 'option';
      b.textContent = o.text;
      b.addEventListener('click', ()=>{
        opts.querySelectorAll('.option').forEach(x=>x.classList.remove('selected'));
        b.classList.add('selected');
        q.selected = j;
      });
      opts.appendChild(b);
    });

    const fb = document.createElement('div');
    fb.className = 'feedback';
    fb.innerHTML = '<span class="icon" aria-hidden="true"></span><span></span>';
    card.appendChild(opts);
    card.appendChild(fb);
    quizEl.appendChild(card);
  });
  document.getElementById('resQuiz').style.display = 'none';
  quizScore = 0;
  checkFinal(); // d√∂ljer ev. final om dnd var klart
}

function checkQuiz(){
  const cards = document.querySelectorAll('.question');
  let total = QUIZ.length, correct = 0;

  QUIZ.forEach((q,i)=>{
    const card = cards[i];
    const opts = card.querySelectorAll('.option');
    const fb = card.querySelector('.feedback');
    const icon = fb.querySelector('.icon');
    const text = fb.querySelector('span:last-child');

    if(q.selected===undefined){
      fb.style.display='flex';
      fb.className='feedback missing';
      icon.innerHTML = '';
      text.textContent = 'Du har inte valt n√•got svar.';
      return;
    }

    opts.forEach((b,idx)=>{
      b.disabled = true;
      const ok = q.options[idx].correct;
      if(idx===q.selected){
        if(ok){
          b.classList.add('correct');
          fb.className='feedback correct';
          icon.innerHTML = ICONS.check;
          correct++;
        }else{
          b.classList.add('wrong');
          fb.className='feedback wrong';
          icon.innerHTML = ICONS.cross;
        }
      }
    });

    fb.style.display='flex';
    text.textContent = q.options[q.selected].feedback;
  });

  const res = document.getElementById('resQuiz');
  res.style.display = 'block';
  res.innerHTML = (correct===total)
    ? `<span class="score">Toppen! ${correct}/${total} r√§tt.</span> Du k√§nde igen tonerna klockrent.`
    : `<span class="score">${correct}/${total} r√§tt.</span> L√§s feedbacken ovan och justera dina val.`;

  quizScore = (correct===total) ? 1 : 0;
  checkFinal();
}

/* ======================================================
   Slutbel√∂ning ‚Äì visas bara vid full pott i Del 1 & 2
   ====================================================== */
function checkFinal(){
  const final = document.getElementById('final');
  final.style.display = (dndScore===1 && quizScore===1) ? 'block' : 'none';
}

/* ======================================================
   Init & knappar
   ====================================================== */
document.getElementById('checkDnd').addEventListener('click', checkDnd);
document.getElementById('resetDnd').addEventListener('click', resetDnd);
document.getElementById('checkQuiz').addEventListener('click', checkQuiz);
document.getElementById('resetQuiz').addEventListener('click', renderQuiz);

resetDnd();
renderQuiz();
</script>
</body>
</html>
